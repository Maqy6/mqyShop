KISSY.add("cm/qualified/0.5.0/app-detail/tb-detail",function(i,t){var a=i.all,e="",n="",o={mainPic:"_720x720.jpg",minPic:"_50x50.jpg",maxSize:800,zoomSize:400,link:!1,search:i.unparam(location.search.substring(1)).hasOwnProperty("qualified"),el:"#J_Qualification",items:".tb-qualification-items a",tpl:'{{#result}}<div class="tb-qualification clearfix">{{#if ../link}}<a class="tb-qualification-info" href="{{../link}}" target="_blank">\u4ec0\u4e48\u662f\u5546\u54c1\u8d44\u8d28</a>{{/if}}<dl>  <dt class="tb-qualification-title">    <img src="//img.alicdn.com/tps/TB1hWz.IXXXXXbNXXXXXXXXXXXX.png" alt="\u5546\u54c1\u8d44\u8d28">    <p>\u5546\u54c1\u8d44\u8d28</p>    <span>{{topGroup}}</span>    <i></i>  </dt>  <dd class="tb-qualification-items">   {{#each groupDetails}}    <a href="javascript:void(0)" data-src="{{urls}}" data-name="{{typeName}}" data-spm-click="gostr=/tbdetail;locaid=d{{xindex}};name={{typeName}}&itemid='+g_config.itemId+'">      <img class="tb-qualification-items-icon" src="{{image}}" alt="{{typeName}}">      <p class="tb-qualification-items-type">{{title}}</p>      <div title="\u70b9\u51fb\u67e5\u770b\u5927\u56fe">        <p>{{tips}}</p>         {{#urls}}           <img src="{{this}}_240x10000.jpg">         {{/urls}}      </div>    </a>   {{/each}}  </dd></dl></div>{{/result}}'};return{init:function(t){t.result&&t.result.groupDetails&&(i.mix(o,t),a(o.el).attr("data-spm","qualification-icon"),this.dlg.render())},dlg:{show:function(n){var o=a(this).attr("data-src").split(","),c=new t('<div data-spm="qualification-pics" class="tb-qualification-dlg" {{#picItems}}{{#if xcount<2}} style="width:auto" {{/if}}{{/picItems}}>{{#picItems}}{{#if xindex===1}}<a href="javascript:;" data-spm-click="gostr=/tbdetail;locaid=n1" class="tb-viewer-icon tb-qualification-prev" id="J_qualification_prev">&#xe600;</a><a href="javascript:;" data-spm-click="gostr=/tbdetail;locaid=n2" class="tb-viewer-icon tb-qualification-next" id="J_qualification_next">&#xe601;</a>{{/if}}{{/picItems}}<a href="javascript:;" class="tb-qualification-close" id="J_qualification_close"><i class="tb-viewer-icon">&#xe602;</i></a><div id="J_qualification_pic">{{#picItems}}  <img class="{{#if xindex!==0}}tb-qualification-pic-hide{{/if}}" src="{{this}}_670x670.jpg">{{/picItems}}</div><ul class="tb-qualification-index">{{#picItems}} {{#if xcount>1}}<li data-spm-click="gostr=/tbdetail;locaid=d{{xindex}}" class="{{#if xindex===0}}on{{/if}}"></li>{{/if}}{{/picItems}}</ul></div>').render({picItems:o});e=new i.Overlay({content:c,closeAction:"destroy",align:{points:["cc","cc"]},effect:{effect:"fade",duration:.3},zIndex:100000012,mask:{closeOnClick:!0}}).show();var s=a("img","#J_qualification_pic"),l="",d=0,r=a("li",".tb-qualification-index"),f=function(i){l=a(".on",".tb-qualification-index").removeClass("on"),s.item(l.index()).hide(),d="next"===i?l.index()+1===s.length?0:l.index()+1:l.index()-1<0?r.length-1:l.index()-1,s.item(d).fadeIn(),r.item(d).addClass("on")};a("#J_qualification_next").on("click",function(i){f("next")}),a("#J_qualification_prev").on("click",function(i){f("prev")}),a("#J_qualification_close").on("click",function(i){e.destroy()})},log:function(i){var t="/tbdetail.2013.1.qualification-icon.d"+a(this).index(),e="type=hover&name="+encodeURIComponent(a(this).attr("data-name"))+"&itemid="+g_config.itemId,n="H"+function(i){var t=(i=(i||"").split("#")[0].split("?")[0]).length;return t?function(i){var t,a=i.length,e=0;for(t=0;a>t;t++)e=31*e+i.charCodeAt(t);return e}(t+"#"+i.charCodeAt(t-1)):-1}(t);goldlog.record(t,null,e,n)},render:function(){var i=new t(o.tpl).render(o),e=a(o.el);i&&e.html(i)&&a(o.items).on("click",this.show).on("mouseenter",this.log)}},tip:{show:function(i){},hide:function(i){},render:function(){}},_show:function(t){var c=a(this),s=a("body");c.hasClass("on")||(c.addClass("on"),e?e.show():((e=new i.Overlay({content:o.tplBox,width:500,align:{node:"",points:["tr","tr"],offset:[-95,20]},effect:{effect:"fade",duration:.3},zIndex:100000012,mask:{closeOnClick:!0}}).show()).get("maskNode").addClass("ks-qualified-mask"),e.on("hide",function(){c.removeClass("on")}),window.QD=e,i.use("kg/imagezoom/2.0.0/index",function(i,t){n=new t({imageNode:"#J_QualifiedImg",type:"inner",align:{node:"#J_QualifiedImg",points:["tr","tl"],offset:[0,0]},bigImageWidth:o.maxSize,bigImageHeight:o.maxSize,width:o.zoomSize,height:o.zoomSize})}),a(".tb-qualified-piclist li").on("mouseover",function(i){var t=a(this),e=t.all("img").attr("data-src");a(".tb-qualified-piclist .on").removeClass("on"),t.addClass("on"),a("#J_QualifiedImg").prop("src",e+o.mainPic).attr("data-ks-imagezoom",e),n.set("bigImageSrc",e),n.set("imageSrc",e+o.mainPic)}),a(".tb-qualified-close").on("click",function(){e.hide(),c.removeClass("on")}),s.on("tabbar:postswitch",function(i){e.hide(),"".removeClass("on")})))}}},{requires:["xtemplate","node","event","overlay","io","./tb-detail.css"]});